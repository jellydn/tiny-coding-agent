{
  "project": "Tiny Coding Agent",
  "branchName": "ralph/ink-cli-integration",
  "description": "Integrate Ink (React for CLIs) to provide real-time spinners, styled messages, and a foundation for future UI enhancements.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Set up Ink infrastructure",
      "description": "As a developer, I need Ink installed and configured so I can build React-based CLI components.",
      "acceptanceCriteria": [
        "Add ink, react, and @types/react dependencies via bun add",
        "Create src/ui/ directory for Ink components",
        "Create src/ui/App.tsx as the root Ink component with basic Text output",
        "Update tsconfig.json to support JSX (jsx: react-jsx)",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Add TTY detection and fallback logic",
      "description": "As a user running in pipes or non-interactive mode, I need plain text output so the agent still works.",
      "acceptanceCriteria": [
        "Create src/ui/utils.ts with isTTY() function checking process.stdout.isTTY",
        "Add --no-color CLI flag that forces plain output",
        "Export shouldUseInk() helper combining TTY check and flag",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Create Spinner component",
      "description": "As a user, I want to see a spinner while waiting for LLM responses so I know the agent is working.",
      "acceptanceCriteria": [
        "Add ink-spinner dependency",
        "Create src/ui/components/Spinner.tsx component",
        "Spinner shows elapsed time in seconds (e.g., 'Thinking... 2.3s')",
        "Component accepts isLoading prop to show/hide",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Create Message component",
      "description": "As a user, I want visually distinct formatting for my messages vs assistant responses.",
      "acceptanceCriteria": [
        "Create src/ui/components/Message.tsx component",
        "User messages show 'You:' label in blue color",
        "Assistant messages show 'Agent:' label in green color",
        "Messages wrap properly at terminal width using ink's Text",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Create ToolOutput component",
      "description": "As a user, I want tool executions to be visually clear so I can see what actions the agent is taking.",
      "acceptanceCriteria": [
        "Add ink-box dependency",
        "Create src/ui/components/ToolOutput.tsx component",
        "Tool name displayed in a bordered box header",
        "Success results shown with green checkmark (✓)",
        "Errors shown with red X (✗) and error message",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Integrate Ink App into CLI interactive mode",
      "description": "As a user, I want the interactive chat to use Ink components for better visual experience.",
      "acceptanceCriteria": [
        "Modify src/cli/main.ts to conditionally render Ink App in interactive mode",
        "Use shouldUseInk() to decide between Ink and plain console output",
        "Spinner displays during LLM API calls",
        "Messages render using Message component",
        "Tool results render using ToolOutput component",
        "Plain console.log fallback works when Ink is disabled",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Add scrollable view for long tool outputs",
      "description": "As a user, I want to scroll through long tool outputs so I can see all the content.",
      "acceptanceCriteria": [
        "ToolOutput component detects when content exceeds terminal height",
        "Long outputs rendered in scrollable container with up/down navigation hints",
        "Show line count indicator (e.g., 'Lines 1-50 of 200')",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Add --json output mode",
      "description": "As a developer, I want JSON output for programmatic use so I can integrate with other tools.",
      "acceptanceCriteria": [
        "Add --json CLI flag to src/cli/main.ts",
        "When --json is set, output each message as JSON object to stdout",
        "JSON format: {type: 'user'|'assistant'|'tool', content: string, toolName?: string}",
        "Disable Ink rendering when --json is active",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    }
  ]
}
